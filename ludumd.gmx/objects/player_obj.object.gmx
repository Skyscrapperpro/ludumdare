<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>editor_player</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>1000</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>601</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_execute_script</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>9</kind>
            <script>reverse_position</script>
          </argument>
          <argument>
            <kind>0</kind>
            <string></string>
          </argument>
          <argument>
            <kind>0</kind>
            <string></string>
          </argument>
          <argument>
            <kind>0</kind>
            <string></string>
          </argument>
          <argument>
            <kind>0</kind>
            <string></string>
          </argument>
          <argument>
            <kind>0</kind>
            <string></string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Set depth
if (!ISPERSPECTIVE) depth = -1;

</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Cries array
cry[0] = cry0_snd;
cry[1] = cry1_snd;
cry[2] = cry3_snd;
cry[3] = cry3_snd;
cry[4] = cry4_snd;
cry[5] = zombie0_snd;
cry[6] = zombie1_snd;
cry[7] = zombie2_snd;
cry[8] = zombie3_snd;
cry[9] = zombie4_snd;
cry[10] = zombie5_snd;

</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Speed variables
xspeed = 0;
yspeed = 0;

</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Create camera data
zangle = 0;
angle = 0;
mouse_active = true;
auto_rotation = false;

</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Set camera
if (ISPERSPECTIVE)
{
    xf = x + cos(degtorad(angle));
    yf = y - sin(degtorad(angle));
    zf = CAM_Z - sin(degtorad(zangle));
}
else
{
    //view_wview *= 1.5;
    //view_hview *= 1.5;
}

</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// GUI control
guni = 0;
handitem = 0; //0 = spatula, 1 = gun
spatulaburger = 0; //0 = no, 1 = uncooked, 2 = cooked, 3 = burn
alp = 0;

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Raycasts checking
//Gun shot
if (guni == (sprite_get_number(gunshot)/2))
{
    audio_play_sound(shot_snd, 2, false);
    
    obj_shot = nearest_raycast(humanoid_obj);
    
    if (obj_shot != noone) 
    switch (obj_shot.object_index)
    {
        case zombie_obj:
            event_kill_zombie(obj_shot);
            break;
        case customer_obj:
            event_kill_customer(obj_shot);
            break;
    }
}
else if (LEFTCLICK)
if (player_obj.handitem == 0) //and
{
    obj_shot = nearest_raycast(interactable_obj);
    
    if (obj_shot != noone)
    switch (obj_shot.object_index)
    {
        case burgerbox_obj:
            if (spatulaburger=0)
            {
                spatulaburger = 1;
            }
            break;
        case grill_obj:
            if (spatulaburger=1)
            {
                spatulaburger=0;
                instance_create(grill_obj.xcast,grill_obj.ycast,burger_obj);
            }
            break;
    }
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Check if zombies are present and do noises
if (handitem == 1)
{
    if !instance_exists(zombie_obj) then handitem = 0;
    else if (irandom(CRY_FREQ) == 1)
        audio_play_sound(cry[irandom(array_length_1d(cry) - 1)], 2, false);
}

</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Alpha check
if (instance_exists(zombie_obj))
{
    if ((alp + 0.1) = 1)
    {
        audio_play_sound(cry[irandom(array_length_1d(cry) - 1)], 2, false);
        alp += 0.1;
    }
    else if (alp &lt; 1) alp += 0.1;
}
else
    if (alp &gt; 0) alp -= 0.1;

</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Animations
if (handitem == 1) //If you got the gun
{
    if (guni &gt; 0)
    {
        if ((guni + 1) &gt; (sprite_get_number(gunshot)-1))
            guni = 0;
        else guni++;
    }
    else if (LEFTCLICK) guni++;
}
else guni = 0;

</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Get rotation
//Check mouse active
if (MIDDLECLICK) mouse_active = !mouse_active;

//Get angle
if (!auto_rotation)
{
    if (mouse_active)
    {
        //Horizontal movement
        var mspeed = GETXCAMSPD;
        angle = add_angle(angle, mspeed, 180);
    
        //Vertical movement
        var mvspeed = GETYCAMSPD;
        if (!handitem) zangle = clamp((zangle + mvspeed), -90, 90);
        else zangle = 0;
    }
}
else //Auto rotation
{
    var hrottarget = 0;
    var vrottarget = 0;
    
    //Rotate
    angle = var_to_target(angle, hrottarget, AUTOCAM_SPD);
    zangle = var_to_target(zangle, vrottarget, AUTOCAM_SPD);
    
    //Check if rotation has finished
    if (angle == hrottarget) //and
    if (zangle == vrottarget)
    {
        auto_rotation = false;
        handitem = 1;
    }
}

//Reset mouse position
if (mouse_active) then display_mouse_set(display_get_width()/2, display_get_height()/2);
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Get position
//Get input angle
var move_angle = add_angle(angle, point_direction(0, 0, LEFT-RIGHT, BACKWARDS-FORWARD), 180);
var xspeed_targ = 0;
var yspeed_targ = 0;

//Set speed if you are moving
if (RIGHT||LEFT||FORWARD||BACKWARDS)
{
    xspeed_targ = lengthdir_x(CHAR_SPD, move_angle);
    yspeed_targ = lengthdir_y(CHAR_SPD, move_angle);
}

//Acceleration
xspeed = var_to_target(xspeed, xspeed_targ, CHAR_ACC);
yspeed = var_to_target(yspeed, yspeed_targ, CHAR_ACC);

///Collisions
xspeed = do_collision_x_first(xspeed);
yspeed = do_collision_y(xspeed, yspeed);

///Move
x += xspeed;
y += yspeed;

</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Set camera
if (ISPERSPECTIVE)
{
    xf = x - sin(degtorad(angle));
    yf = y - cos(degtorad(angle));
    zf = -CAM_Z - sin(degtorad(zangle));
}
else
{
    view_angle = 180-angle;
    view_xview = x - view_wview/2;
    view_yview = y - view_hview/2;
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="64">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Draw GUI
//Draw pixelated surface.
if (ISPERSPECTIVE) then pixelate(PIXEL_LENGTH);

//Draw hold item
var gun_x = view_wport/2;
var gun_y = view_hport;
var spat_x = view_wport*0.8;
var spat_y = view_hport - (PIXEL_LENGTH * 5);

if (handitem == 1)
    draw_sprite_ext(gunshot, guni, gun_x, gun_y, PIXEL_LENGTH, PIXEL_LENGTH, 0, -1, 1);
else if (handitem == 0)
    draw_sprite_ext(spatula, spatulaburger, spat_x, spat_y, PIXEL_LENGTH, PIXEL_LENGTH, 0, -1, 1);

//Draw alpha effect
var scl = (view_wport/sprite_get_width(focus));
draw_sprite_ext(focus, 0, 0, 0, scl, scl, 0, -1, alp);

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Draw camera
if (ISPERSPECTIVE) d3d_set_projection(x, y, -CAM_Z, xf, yf, zf, 0, 0, -1);
else draw_sprite_ext(sprite_index, 0, x, y, 1, 1, angle, -1, 1);

</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
