<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>editor_player</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>1000</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>601</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_execute_script</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>9</kind>
            <script>reverse_position</script>
          </argument>
          <argument>
            <kind>0</kind>
            <string></string>
          </argument>
          <argument>
            <kind>0</kind>
            <string></string>
          </argument>
          <argument>
            <kind>0</kind>
            <string></string>
          </argument>
          <argument>
            <kind>0</kind>
            <string></string>
          </argument>
          <argument>
            <kind>0</kind>
            <string></string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Set depth
if (!ISPERSPECTIVE) depth = -1;

</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Cries array
cry[0] = cry0_snd;
cry[1] = cry1_snd;
cry[2] = cry3_snd;
cry[3] = cry3_snd;
cry[4] = cry4_snd;
cry[5] = zombie0_snd;
cry[6] = zombie1_snd;
cry[7] = zombie2_snd;
cry[8] = zombie3_snd;
cry[9] = zombie4_snd;
cry[10] = zombie5_snd;

</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Speed variables
xspeed = 0;
yspeed = 0;

</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Create camera data
zangle = 0;
angle = 0;
auto_rotation = false;

</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Set camera
if (ISPERSPECTIVE)
{
    xf = x + cos(degtorad(angle));
    yf = y - sin(degtorad(angle));
    zf = CAM_Z - sin(degtorad(zangle));
}
else
{
    //view_wview *= 1.5;
    //view_hview *= 1.5;
}

</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// GUI control
guni = 0;
gunlimit = (sprite_get_number(gunshot) - 1);
spati = 0;
spatlimit = (sprite_get_number(spatula) - 1);
handitem = 0; //0 = spatula, 1 = gun
spatulaburger = 0; //0 = no, 1 = uncooked, 2 = cooked, 3 = burn
alp = 0;

taken_plate = -1;

lifeval = STARTING_LIFE;
scoreval = 0;
gameoverval = 0;
goindex = 0;
gotimer = 0;
alpgo = 0;

for (var i = 0; i &lt; STARTING_LIFE; i++) lifei[i] = 0;

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Raycasts checking
//Gun shot
if (guni == (sprite_get_number(gunshot)/2))
{
    audio_play_sound(shot_snd, 2, false);
    
    var obj_shot = nearest_raycast(humanoid_obj);
    
    if (obj_shot != noone) 
    switch (obj_shot.object_index)
    {
        case zombie_obj:
            event_kill_zombie(obj_shot);
            break;
        case customer_obj:
            event_kill_customer(obj_shot);
            break;
    }
}
else if (LEFTCLICK) //and
if (player_obj.handitem == 0)
{
    var obj_shot = nearest_raycast(interactable_obj);
    
    if (obj_shot != noone) //and
    if (taken_plate = -1)
    {
        switch (obj_shot.object_index)
        {
            case gunitem_obj:
                handitem = 1;
                instance_deactivate_object(gunitem_obj);
                break;
            case customer_obj:
                if (!obj_shot.satisf)
                if (!obj_shot.dying)
                    event_customer_menu(obj_shot);
                break;
            case trashcan_obj:
                spatulaburger = 0;
                break;
            case burger_obj:
                if (spatulaburger == 0) then spatulaburger = obj_shot.cook + 1;
                with (obj_shot) instance_destroy();
                break;
            case grill_obj:
                event_grill_burger(obj_shot);
                break;
            case burgerbox_obj:
                if (spatulaburger == 0) then spatulaburger = 1;
                break;
            case breadbox_obj:
                if (spatulaburger == 0) then spatulaburger = 4;
                break;
            case cheesebox_obj:
                if (spatulaburger == 0) then spatulaburger = 5;
                break;
            case lechugabox_obj:
                if (spatulaburger == 0) then spatulaburger = 6;
                break;
            case tomatobox_obj:
                if (spatulaburger == 0) then spatulaburger = 7;
                break;
            case plates_obj:
                if (spatulaburger != 0)
                {
                    if event_place_ing(obj_shot, spatulaburger)
                    spatulaburger = 0;
                }
                else taken_plate = event_take_plate(obj_shot);
                break;
        }
    }
    else
    {
        switch (obj_shot.object_index)
        {
            case customer_obj:
                if (!event_ask_customer(obj_shot, taken_plate))
                {
                    event_kill_customer(obj_shot);
                    with (taken_plate) instance_destroy();
                    taken_plate = -1;
                }
                else if (!obj_shot.satisf)
                {
                    event_satisfy_customer(obj_shot);
                    with (taken_plate) instance_destroy();
                    taken_plate = -1;
                }
                break;
            case trashcan_obj:
                with (taken_plate) instance_destroy();
                taken_plate = -1;
                break;
            case plates_obj:
                event_putdown_plate(obj_shot, taken_plate);
                taken_plate = -1;
                break;
        }
    }
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Check if zombies are present and do noises
if instance_exists(zombie_obj) //and
if (irandom(CRY_FREQ) == 1)
    audio_play_sound(cry[irandom(array_length_1d(cry) - 1)], 2, false);

</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Alpha check
if (instance_exists(zombie_obj))
{
    if ((alp + 0.1) = 1)
    {
        audio_play_sound(cry[irandom(array_length_1d(cry) - 1)], 2, false);
        alp += 0.1;
    }
    else if (alp &lt; 1) alp += 0.1;
}
else if (alp &gt; 0) then alp -= 0.1;

if (gameoverval == 1)
{
    if ((alpgo + 0.1) = 1)
    {
        //audio_play_sound(go_snd, 2, false);
        alpgo += 0.1;
    }
    else if (alpgo &lt; 1) alpgo += 0.1;
}
else if (alpgo &gt; 0) then alpgo -= 0.1;

</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Animations
if (handitem == 1) //If you got the gun
{
    spati = spatulaburger;
    var ratio = 0.25;
    if (guni &gt; 0)
    {
        if ((guni + ratio) &gt; gunlimit)
            guni = 0;
        else guni += ratio;
    }
    else if (LEFTCLICK) guni = ratio;
}
else //If you got the spatula
{
    guni = 0;
    var ratio = 1;
    if (spati &gt; 7)
    {
        if ((spati + ratio) &gt; spatlimit)
            spati = spatulaburger;
        else spati += ratio;
    }
    else if (LEFTCLICK) spati = 8;
}

// for game over screen
if (gameoverval==1)
{
    gotimer++;
    if (gotimer==GOBLINKRATE)
    {
        gotimer=0;
        goindex=!goindex;
    }
}

// Lives animation
for (var i = 0, ratio = 0.125; i &lt; STARTING_LIFE; i++)
    if (lifei[i] &gt; 0) //and
    if (lifei[i] &lt; (sprite_get_number(life) - 1)) lifei[i] += ratio;

</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Get rotation
//Check mouse active
if (global.play)
if (MIDDLECLICK) global.mouse_active = !global.mouse_active;

//Get angle
if (!auto_rotation)
{
    if (global.play)
    {
        //Horizontal movement
        var mspeed = GETXCAMSPD;
        angle = add_angle(angle, mspeed, ANGREF);
    
        //Vertical movement
        if (handitem != 1)
        {
            var mvspeed = GETYCAMSPD;
            zangle = clamp((zangle + mvspeed), -90, 90);
        }
        else zangle = var_to_target(zangle, 0, AUTOCAM_SPD);
    }
}
else //Auto rotation
{
    var hrottarget = 0;
    var vrottarget = 0;
    
    //Rotate
    angle = var_to_target(angle, hrottarget, AUTOCAM_SPD);
    zangle = var_to_target(zangle, vrottarget, AUTOCAM_SPD);
    
    //Check if rotation has finished
    if (angle == hrottarget) //and
    if (zangle == vrottarget)
        auto_rotation = false;
}

//Reset mouse position
if (global.mouse_active) then display_mouse_set(display_get_width()/2, display_get_height()/2);
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Get position
var xspeed_targ = 0;
var yspeed_targ = 0;

if (global.play)
{
    //Get input angle
    var move_angle = add_angle(angle, point_direction(0, 0, LEFT-RIGHT, BACKWARDS-FORWARD), ANGREF);
    
    //Set speed if you are moving
    if (RIGHT||LEFT||FORWARD||BACKWARDS)
    {
        xspeed_targ = lengthdir_x(CHAR_SPD, move_angle);
        yspeed_targ = lengthdir_y(CHAR_SPD, move_angle);
    }
}

//Acceleration
xspeed = var_to_target(xspeed, xspeed_targ, CHAR_ACC);
yspeed = var_to_target(yspeed, yspeed_targ, CHAR_ACC);

///Collisions
xspeed = do_collision_x_first(xspeed);
yspeed = do_collision_y(xspeed, yspeed);

///Move
x += xspeed;
y += yspeed;

</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Set camera
if (ISPERSPECTIVE)
{
    xf = x - sin(degtorad(angle));
    yf = y - cos(degtorad(angle));
    zf = -CAM_Z - sin(degtorad(zangle));
}
else
{
    view_angle = 180 - angle;
    view_xview = x - view_wview/2;
    view_yview = y - view_hview/2;
}

</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Set plate position
if (taken_plate != -1)
{
    taken_plate.x = x - sin(degtorad(angle)) * PLATE_SEP;
    taken_plate.y = y - cos(degtorad(angle)) * PLATE_SEP;
    taken_plate.image_angle = angle;
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="64">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Draw GUI
//Draw pixelated surface.
if (ISPERSPECTIVE) then pixelate(PIXEL_LENGTH);

//Draw hold item
var gun_x = view_wport/2;
var gun_y = view_hport;
var spat_x = view_wport * 0.8;
var spat_y = view_hport - (PIXEL_LENGTH * 5);

if (handitem == 1)
    draw_sprite_ext(gunshot, floor(guni), gun_x, gun_y, PIXEL_LENGTH, PIXEL_LENGTH, 0, -1, 1);
else if (handitem == 0)
    draw_sprite_ext(spatula, floor(spati), spat_x, spat_y, PIXEL_LENGTH, PIXEL_LENGTH, 0, -1, 1);

//Draw alpha effect
var scl = (view_wport/sprite_get_width(focus));
if (alp &gt; 0) then draw_sprite_ext(focus, 0, 0, 0, scl, scl, 0, -1, alp);

//Draw life
for (var i = 0; i &lt; STARTING_LIFE; i++)
    draw_sprite_ext(life, floor(lifei[i]), i * LIFE_SEP * PIXEL_LENGTH, 0, PIXEL_LENGTH, PIXEL_LENGTH, 0, -1, 1);

//Draw score
draw_set_colour(c_teal);
draw_text_transformed(0, view_hport - 80, string(scoreval), PIXEL_LENGTH, PIXEL_LENGTH, 0);
draw_set_colour(c_white);

//Draw game over
var sclgo = (view_wport/sprite_get_width(gameover));

if (gameoverval == 1)
    draw_sprite_ext(gameover, goindex, 0, 0, sclgo, sclgo, 0, -1, alpgo);

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Draw camera
if (ISPERSPECTIVE) d3d_set_projection(x, y, -CAM_Z, xf, yf, zf, 0, 0, -1);
else draw_sprite_ext(sprite_index, 0, x, y, 1, 1, angle, -1, 1);

</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
