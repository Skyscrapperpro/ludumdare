<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>editor_client</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-1</depth>
  <persistent>0</persistent>
  <parentName>humanoid_obj</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Spawn
//Look for shortest line
line = 0;
for (var i = 0; i &lt; LINES_AMOUNT; i++)
{
    if (ds_list_size(global.line_ids[i]) &lt; ds_list_size(global.line_ids[line]))
        line = i;
}

//Get last position in line
last = ds_list_size(global.line_ids[line]);

//Set id
ds_list_add(global.line_ids[line], id);

set_customer_target(id);

</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Raycast setup
in_angle = false;

</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Draw setup
var custID = irandom(array_length_1d(global.cust_alive) - 1);
main_spr = global.cust_alive[custID];
back_spr = global.cust_back[custID];
ded_spr = global.cust_ded[custID];
talk_spr = global.cust_talk_face[custID];
talk_snd = global.cust_talk_snd[custID];

snd = global.cust_cry_snd[custID];
talki = 0;
talklimit = sprite_get_number(talk_spr);

menu_spr = customer_dialog;
ing_spr = ingredients;

selected_menu = false;
looking_right = choose(true, false);

</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Other
satisf = false;
satix = 0;
satiy = 0;
pr_alp = 1;

</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Array burger
//0 = burger cruda
//1 = burger quemada
//2 = bread, 3 = burger
//4 = cheese, 5 = lechuga
// 6 = tomato, 7 = top bread
burger_asked[0] = 2;
price = 0;
shield=PATIENCE_SHIELD;
for(var i = 1; i &lt; irandom_range(2, floor(global.level) - 1); i++)
{
    burger_asked[i] = irandom_range(3, 5);
    if (burger_asked[i] == 3) {
        price += PRICE_BURGER;
        shield+=BURGER_SHIELD;
    }
    else 
    {
        price += PRICE_INGREDIENT;
        shield+=PATIENCE_SHIELD;
    }
}
burger_asked[i] = 7;
shield+=PATIENCE_SHIELD;
shieldstart=shield;
ptimer=0;
patientimer=0;

</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>604</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>0</useapplyto>
        <exetype>1</exetype>
        <functionname>action_inherited</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>604</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>0</useapplyto>
        <exetype>1</exetype>
        <functionname>action_inherited</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
      </action>
      <action>
        <libid>1</libid>
        <id>612</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>-1</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_if_variable</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>0</kind>
            <string>dying</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>false</string>
          </argument>
          <argument>
            <kind>4</kind>
            <string>0</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>422</id>
        <kind>1</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>0</useapplyto>
        <exetype>0</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Check zombies and set target
if (instance_exists(zombie_obj))
{
    var zomb = instance_nearest(x, y, zombie_obj);
    var zomang = point_direction(zomb.x, zomb.y, x, y,);
    targetx = lengthdir_x(1000, zomang);
    targety = lengthdir_y(1000, zomang);
    if (selected_menu) then selected_menu = false;
    solid = true;
    talki = 1;
}
else
{
    if (!satisf) check_line(id);
    targetx = inittargetx;
    targety = inittargety;
    solid = false;
}

</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Movement
//Set angle
m_angle = add_angle(point_direction(x, y, targetx, targety), 0, ANGREF);

//Set speed
var xspeed = lengthdir_x(CUSTOMER_SPD, m_angle);
var yspeed = lengthdir_y(CUSTOMER_SPD, m_angle);

//Collisions
xspeed = do_collision_x_first(xspeed);
yspeed = do_collision_y(xspeed, yspeed);

//Move
x = var_to_target(x, targetx, xspeed);
y = var_to_target(y, targety, yspeed);

if (y &lt; (room_manager_obj.y)) then instance_destroy();

</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Animation
if (targety &lt; y) then sprite = back_spr;
else sprite = main_spr;

if ((x != targetx) || (y != targety))
{
    // ------- Animation ------
    var ratio = 0.2;
    
    if ((subi + ratio) &lt; ilimit) then subi += ratio;
    else subi = 1;
    //
}
else subi = 0;

if (talki &gt; 0)
{
    var ratio = 0.5;

    if ((talki + ratio) &lt; talklimit) then talki += ratio;
    else talki = 0;
}

if (pr_alp &lt; 5)
{
    var ratio = 0.1;
    
    if ((pr_alp - ratio) &gt; 0) then pr_alp -= ratio;
    else pr_alp = 5;
}

</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>424</id>
        <kind>2</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>0</useapplyto>
        <exetype>0</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
      </action>
      <action>
        <libid>1</libid>
        <id>421</id>
        <kind>3</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>0</useapplyto>
        <exetype>0</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Animation
sprite = ded_spr;

var ratio = 0.25;

if ((dedi + (2 * ratio)) &lt; dedlimit) then dedi += ratio;
else instance_destroy();

</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///ptimer management
if (selected_menu)      //el tiempo solo cuenta cuando el cliente ha pedido
    {
    if (shield==0)
    {
        patientimer++;
        if (patientimer&gt;=CUSTOMER_PATIENCE)
        {
            patientimer=0;
            ptimer+=CUSTOMER_IMPATIENCE;
        }
        if (ptimer&gt;price)
        {
            ptimer=price;
        }
    }
    else shield-=1;
}
else                
{
patientimer=0;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>604</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>0</useapplyto>
        <exetype>1</exetype>
        <functionname>action_inherited</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Draw selected menu
if (ISPERSPECTIVE)
{
    var zpos = -sprite_get_height(sprite)/2;
    if (talki &gt; 0) then draw_3dspr_angle(talk_spr, talki, x, y + 0.1, zpos, 1, d_angle, looking_right);
    if (selected_menu)
    {
        var xpos = x - lengthdir_x(DIALOG_DIST_X, d_angle);
        var ypos = y - lengthdir_y(DIALOG_DIST_X, d_angle);
        draw_3dspr_angle(menu_spr, 0, x, y + 0.2, zpos, 1, d_angle);
        for (var i= 0; i &lt; array_length_1d(burger_asked); i++)
            draw_3dspr_angle(ing_spr, burger_asked[i], xpos, ypos + 0.3 + (0.1 * i), zpos - DIALOG_DIST_Z - (ING_SEP * i), 0.5, d_angle);
    }
    if (pr_alp &lt; 5) 
    {
        text_effect(satix, satiy, -CAM_Z + pr_alp, "$" + string_format(price, 1, 2), 0.3, d_angle, c_green, pr_alp);
        var ran_col = make_colour_hsv(irandom(255), 255, 255);
        if (ptimer&gt;0)
        {
            text_effect(satix, satiy, -CAM_Z + 6 + pr_alp, "-" + string_format(ptimer, 1, 2), 0.3, d_angle, c_red, pr_alp);
            text_effect(satix, satiy, -CAM_Z + 10 + pr_alp, "Time penalty!", 0.2, d_angle, c_red, pr_alp);
        }
        else if (shield&gt;shieldstart/4)
        {
            text_effect(satix, satiy, -CAM_Z + 6 + pr_alp, "+" + string_format(price*0.5, 1, 2), 0.3, d_angle, ran_col, pr_alp);
            text_effect(satix, satiy, -CAM_Z + 10 + pr_alp, "Time bonus!", 0.2, d_angle, ran_col, pr_alp);
        }
    }
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
